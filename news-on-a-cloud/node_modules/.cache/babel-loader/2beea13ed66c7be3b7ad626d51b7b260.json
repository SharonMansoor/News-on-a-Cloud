{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sharon\\\\Projects\\\\NewsOnACloud\\\\news-on-a-cloud\\\\src\\\\components\\\\NewsPreview.js\";\nimport React from \"react\";\nimport Category from \"./Category\";\nimport { Box, FormControl, InputLabel, Select, MenuItem, Grid } from \"@material-ui/core\";\nimport news from \"../TempData/News\";\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nexport default function NewsPreview() {\n  let newsByCategory = news.reduce((r, a) => {\n    r[a.category] = [...(r[a.category] || []), a];\n    return r;\n  }, {});\n  const [appState, setAppState] = React.useState({\n    loading: false,\n    articles: null\n  });\n  const [categoryFilter, setCategoryFilter] = React.useState(\"\");\n  const [dateFilter, setDateFilter] = React.useState(null);\n  const [newsDispalyed, setNewsDisplayed] = React.useState(newsByCategory);\n  React.useEffect(() => {\n    setAppState({\n      loading: true\n    });\n    const apiUrl = `http://localhost:8080/articles`;\n    fetch(apiUrl).then(res => res.json()).then(res => {\n      const result = res.reduce((r, a) => {\n        r[a.category] = [...(r[a.category] || []), a];\n        return r;\n      }, {});\n      console.log(result);\n      setAppState({\n        loading: false,\n        articles: result\n      });\n    });\n  }, []);\n  React.useEffect(() => {\n    console.log(appState.articles);\n    let result = {};\n\n    if (categoryFilter !== \"\") {\n      result[categoryFilter] = newsByCategory[categoryFilter];\n    } else {\n      result = newsByCategory;\n    }\n\n    setNewsDisplayed(result); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [categoryFilter, dateFilter]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"#efefef\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    px: 4,\n    py: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, appState.loading ? \"loading\" : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"flex-end\",\n    alignItems: \"flex-end\",\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    fullWidth: true,\n    style: {\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"filterCategory\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(Select, {\n    fullWidth: true,\n    labelId: \"filterCategory\",\n    value: categoryFilter,\n    onChange: event => {\n      setCategoryFilter(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 23\n    }\n  }, \"All\")), Object.keys(newsByCategory).map(category => /*#__PURE__*/React.createElement(MenuItem, {\n    value: category,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 23\n    }\n  }, category))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    disableToolbar: true,\n    variant: \"inline\",\n    format: \"dd/MM/yyyy\",\n    margin: \"normal\",\n    label: \"Date\",\n    value: dateFilter,\n    onChange: date => {\n      setDateFilter(date);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  })))), Object.keys(newsDispalyed).map(category => /*#__PURE__*/React.createElement(Category, {\n    name: category,\n    articles: dateFilter ? newsDispalyed[category].filter(article => {\n      var articleDate = new Date(article.time);\n      return articleDate.getFullYear() === dateFilter.getFullYear() && articleDate.getMonth() === dateFilter.getMonth() && articleDate.getDate() === dateFilter.getDate();\n    }) : newsDispalyed[category],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  })))));\n}","map":{"version":3,"sources":["C:/Users/Sharon/Projects/NewsOnACloud/news-on-a-cloud/src/components/NewsPreview.js"],"names":["React","Category","Box","FormControl","InputLabel","Select","MenuItem","Grid","news","KeyboardDatePicker","MuiPickersUtilsProvider","DateFnsUtils","NewsPreview","newsByCategory","reduce","r","a","category","appState","setAppState","useState","loading","articles","categoryFilter","setCategoryFilter","dateFilter","setDateFilter","newsDispalyed","setNewsDisplayed","useEffect","apiUrl","fetch","then","res","json","result","console","log","backgroundColor","marginBottom","event","target","value","Object","keys","map","date","filter","article","articleDate","Date","time","getFullYear","getMonth","getDate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Category from \"./Category\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport news from \"../TempData/News\";\r\nimport {\r\n  KeyboardDatePicker,\r\n  MuiPickersUtilsProvider,\r\n} from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\nexport default function NewsPreview() {\r\n  let newsByCategory = news.reduce((r, a) => {\r\n    r[a.category] = [...(r[a.category] || []), a];\r\n    return r;\r\n  }, {});\r\n\r\n  const [appState, setAppState] = React.useState({\r\n    loading: false,\r\n    articles: null,\r\n  });\r\n  const [categoryFilter, setCategoryFilter] = React.useState(\"\");\r\n  const [dateFilter, setDateFilter] = React.useState(null);\r\n  const [newsDispalyed, setNewsDisplayed] = React.useState(newsByCategory);\r\n\r\n\r\n  React.useEffect(() => {\r\n    setAppState({ loading: true });\r\n    const apiUrl = `http://localhost:8080/articles`;\r\n    fetch(apiUrl)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        const result = res.reduce((r, a) => {\r\n          r[a.category] = [...(r[a.category] || []), a];\r\n          return r;\r\n        }, {});\r\n        console.log(result)\r\n        setAppState({ loading: false, articles: result });\r\n      });\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    console.log(appState.articles)\r\n    let result = {};\r\n    if (categoryFilter !== \"\") {\r\n      result[categoryFilter] = newsByCategory[categoryFilter];\r\n    } else {\r\n      result = newsByCategory;\r\n    }\r\n\r\n    setNewsDisplayed(result);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [categoryFilter, dateFilter]);\r\n\r\n  return (\r\n    <div style={{ backgroundColor: \"#efefef\" }}>\r\n      <Box px={4} py={2}>\r\n        {appState.loading ? (\r\n          \"loading\"\r\n        ) : (\r\n          <>\r\n            <Grid\r\n              container\r\n              justify=\"flex-end\"\r\n              alignItems=\"flex-end\"\r\n              spacing={2}\r\n            >\r\n              <Grid item md={2}>\r\n                <FormControl fullWidth style={{ marginBottom: \"8px\" }}>\r\n                  <InputLabel id=\"filterCategory\">Category</InputLabel>\r\n                  <Select\r\n                    fullWidth\r\n                    labelId=\"filterCategory\"\r\n                    value={categoryFilter}\r\n                    onChange={(event) => {\r\n                      setCategoryFilter(event.target.value);\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>All</em>\r\n                    </MenuItem>\r\n                    {Object.keys(newsByCategory).map((category) => (\r\n                      <MenuItem value={category}>{category}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={2}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <KeyboardDatePicker\r\n                    disableToolbar\r\n                    variant=\"inline\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    margin=\"normal\"\r\n                    label=\"Date\"\r\n                    value={dateFilter}\r\n                    onChange={(date) => {\r\n                      setDateFilter(date);\r\n                    }}\r\n                  />\r\n                </MuiPickersUtilsProvider>\r\n              </Grid>\r\n            </Grid>\r\n            {Object.keys(newsDispalyed).map((category) => (\r\n              <Category\r\n                name={category}\r\n                articles={\r\n                  dateFilter\r\n                    ? newsDispalyed[category].filter((article) => {\r\n                        var articleDate = new Date(article.time);\r\n                        return (\r\n                          articleDate.getFullYear() ===\r\n                            dateFilter.getFullYear() &&\r\n                          articleDate.getMonth() === dateFilter.getMonth() &&\r\n                          articleDate.getDate() === dateFilter.getDate()\r\n                        );\r\n                      })\r\n                    : newsDispalyed[category]\r\n                }\r\n              />\r\n            ))}\r\n          </>\r\n        )}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}